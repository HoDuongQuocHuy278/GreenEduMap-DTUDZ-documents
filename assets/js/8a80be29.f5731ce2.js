"use strict";(self.webpackChunkgreenedumap_docs=self.webpackChunkgreenedumap_docs||[]).push([[902],{8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(6540);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}},8528:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>t,toc:()=>h});var r=i(4848),s=i(8453);const a={},l="\ud83c\udf0d Environment Service",t={id:"Services/EnvironmentService/Readme",title:"\ud83c\udf0d Environment Service",description:"\ud83d\udccb T\u1ed5ng quan",source:"@site/docs/Services/EnvironmentService/Readme.md",sourceDirName:"Services/EnvironmentService",slug:"/Services/EnvironmentService/",permalink:"/GreenEduMap-DTUDZ-documents/Services/EnvironmentService/",draft:!1,unlisted:!1,editUrl:"https://github.com/HoDuongQuocHuy278/GreenEduMap-DTUDZ-documents/edit/main/docs/Services/EnvironmentService/Readme.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83c\udf93 Education Service",permalink:"/GreenEduMap-DTUDZ-documents/Services/EducationService/"},next:{title:"\ud83c\udf33 Resource Service",permalink:"/GreenEduMap-DTUDZ-documents/Services/ResourceService/"}},c={},h=[{value:"\ud83d\udccb T\u1ed5ng quan",id:"-t\u1ed5ng-quan",level:2},{value:"\ud83c\udfaf Ch\u1ee9c n\u0103ng ch\xednh",id:"-ch\u1ee9c-n\u0103ng-ch\xednh",level:2},{value:"\ud83c\udf2b\ufe0f Air Quality Data (OpenAQ API)",id:"\ufe0f-air-quality-data-openaq-api",level:3},{value:"\u2600\ufe0f Weather Data (OpenWeather API)",id:"\ufe0f-weather-data-openweather-api",level:3},{value:"\ud83d\udd04 Scheduled Data Fetching",id:"-scheduled-data-fetching",level:3},{value:"\ud83d\udce1 NGSI-LD Entity Creation",id:"-ngsi-ld-entity-creation",level:3},{value:"\ud83d\udd0c API Endpoints",id:"-api-endpoints",level:2},{value:"Air Quality",id:"air-quality",level:3},{value:"Weather",id:"weather",level:3},{value:"NGSI-LD",id:"ngsi-ld",level:3},{value:"\ud83d\ude80 Setup",id:"-setup",level:2},{value:"API Keys",id:"api-keys",level:3},{value:"OpenAQ API",id:"openaq-api",level:4},{value:"OpenWeather API",id:"openweather-api",level:4},{value:"Environment Variables",id:"environment-variables",level:3},{value:"\ud83d\udce1 Usage Examples",id:"-usage-examples",level:2},{value:"Get Air Quality Near Da Nang",id:"get-air-quality-near-da-nang",level:3},{value:"Get Current Weather",id:"get-current-weather",level:3},{value:"\ud83d\udcc4 License",id:"-license",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"-environment-service",children:"\ud83c\udf0d Environment Service"}),"\n",(0,r.jsx)(n.h2,{id:"-t\u1ed5ng-quan",children:"\ud83d\udccb T\u1ed5ng quan"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ng\xf4n ng\u1eef l\u1eadp tr\xecnh:"})," Python 3.11 + FastAPI",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Port:"})," 8007",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Database:"})," PostgreSQL + PostGIS",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"External APIs:"})," OpenAQ, OpenWeather",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Tr\u1ea1ng th\xe1i:"})," \u2705 Ho\u1ea1t \u0111\u1ed9ng"]}),"\n",(0,r.jsxs)(n.p,{children:["Environment Service t\xedch h\u1ee3p d\u1eef li\u1ec7u m\xf4i tr\u01b0\u1eddng t\u1eeb OpenAQ (ch\u1ea5t l\u01b0\u1ee3ng kh\xf4ng kh\xed) v\xe0 OpenWeather (th\u1eddi ti\u1ebft) cho h\u1ec7 th\u1ed1ng ",(0,r.jsx)(n.strong,{children:"GreenEduMap"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-ch\u1ee9c-n\u0103ng-ch\xednh",children:"\ud83c\udfaf Ch\u1ee9c n\u0103ng ch\xednh"}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-air-quality-data-openaq-api",children:"\ud83c\udf2b\ufe0f Air Quality Data (OpenAQ API)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Real-time Air Quality"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PM2.5, PM10 measurements"}),"\n",(0,r.jsx)(n.li,{children:"CO, CO2, NO2 levels"}),"\n",(0,r.jsx)(n.li,{children:"AQI calculation"}),"\n",(0,r.jsx)(n.li,{children:"Location-based queries"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Historical Data"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Time-series air quality data"}),"\n",(0,r.jsx)(n.li,{children:"Trend analysis"}),"\n",(0,r.jsx)(n.li,{children:"Data aggregation"}),"\n",(0,r.jsx)(n.li,{children:"Export capabilities"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Spatial Queries (PostGIS)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Find measurements by location + radius"}),"\n",(0,r.jsx)(n.li,{children:"Nearest air quality station"}),"\n",(0,r.jsx)(n.li,{children:"Coverage area analysis"}),"\n",(0,r.jsx)(n.li,{children:"Heatmap data generation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-weather-data-openweather-api",children:"\u2600\ufe0f Weather Data (OpenWeather API)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Current Weather"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Temperature, humidity"}),"\n",(0,r.jsx)(n.li,{children:"Wind speed and direction"}),"\n",(0,r.jsx)(n.li,{children:"Atmospheric pressure"}),"\n",(0,r.jsx)(n.li,{children:"Weather conditions"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5-Day Forecast"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"3-hour intervals"}),"\n",(0,r.jsx)(n.li,{children:"Temperature predictions"}),"\n",(0,r.jsx)(n.li,{children:"Precipitation probability"}),"\n",(0,r.jsx)(n.li,{children:"Weather condition forecasts"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Location-based Queries"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Weather by coordinates"}),"\n",(0,r.jsx)(n.li,{children:"City-level weather"}),"\n",(0,r.jsx)(n.li,{children:"Multiple locations support"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-scheduled-data-fetching",children:"\ud83d\udd04 Scheduled Data Fetching"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Air Quality"}),": Fetch every hour"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Weather"}),": Fetch every 30 minutes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cleanup"}),": Remove old data daily"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"APScheduler"})," for task management"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-ngsi-ld-entity-creation",children:"\ud83d\udce1 NGSI-LD Entity Creation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AirQualityObserved"})," entities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WeatherObserved"})," entities"]}),"\n",(0,r.jsx)(n.li,{children:"ETSI GS CIM 009 V1.6.1 compliance"}),"\n",(0,r.jsx)(n.li,{children:"GeoProperty support"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-api-endpoints",children:"\ud83d\udd0c API Endpoints"}),"\n",(0,r.jsx)(n.h3,{id:"air-quality",children:"Air Quality"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v1/air-quality                # Latest measurements\r\nGET /api/v1/air-quality/location       # By location + radius\r\nGET /api/v1/air-quality/history        # Historical data\r\nGET /api/v1/air-quality/{id}           # Specific measurement\n"})}),"\n",(0,r.jsx)(n.h3,{id:"weather",children:"Weather"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v1/weather/current            # Current weather\r\nGET /api/v1/weather/forecast           # 5-day forecast\r\nGET /api/v1/weather/location           # Weather by location\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ngsi-ld",children:"NGSI-LD"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET  /ngsi-ld/v1/entities?type=AirQuality\r\nPOST /ngsi-ld/v1/entities              # Create entity\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-setup",children:"\ud83d\ude80 Setup"}),"\n",(0,r.jsx)(n.h3,{id:"api-keys",children:"API Keys"}),"\n",(0,r.jsx)(n.h4,{id:"openaq-api",children:"OpenAQ API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Free tier: 10,000 requests/month"}),"\n",(0,r.jsxs)(n.li,{children:["Sign up: ",(0,r.jsx)(n.a,{href:"https://openaq.org/",children:"https://openaq.org/"})]}),"\n",(0,r.jsx)(n.li,{children:"No API key required (public API)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"openweather-api",children:"OpenWeather API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Free tier: 60 calls/minute, 1M calls/month"}),"\n",(0,r.jsxs)(n.li,{children:["Sign up: ",(0,r.jsx)(n.a,{href:"https://openweathermap.org/api",children:"https://openweathermap.org/api"})]}),"\n",(0,r.jsxs)(n.li,{children:["Get API key: ",(0,r.jsx)(n.a,{href:"https://home.openweathermap.org/api_keys",children:"https://home.openweathermap.org/api_keys"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"# Environment Service\r\nENVIRONMENT_SERVICE_HOST=0.0.0.0\r\nENVIRONMENT_SERVICE_PORT=8007\r\n\r\n# Database\r\nDATABASE_URL=postgresql+asyncpg://user:pass@postgres:5432/greenedumap\r\n\r\n# External APIs\r\nOPENWEATHER_API_KEY=your_api_key_here\r\nOPENAQ_API_URL=https://api.openaq.org/v2\r\n\r\n# Scheduler\r\nFETCH_AIR_QUALITY_INTERVAL=3600  # 1 hour\r\nFETCH_WEATHER_INTERVAL=1800      # 30 minutes\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-usage-examples",children:"\ud83d\udce1 Usage Examples"}),"\n",(0,r.jsx)(n.h3,{id:"get-air-quality-near-da-nang",children:"Get Air Quality Near Da Nang"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8007/api/v1/air-quality/location?lat=16.0544&lon=108.2022&radius=50"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "data": [\r\n    {\r\n      "id": "uuid-123",\r\n      "location": "Da Nang",\r\n      "coordinates": {"lat": 16.0544, "lon": 108.2022},\r\n      "aqi": 45,\r\n      "pm25": 12.5,\r\n      "pm10": 25.3,\r\n      "timestamp": "2025-12-04T22:00:00Z"\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"get-current-weather",children:"Get Current Weather"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8007/api/v1/weather/current?lat=16.0544&lon=108.2022"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "temperature": 28.5,\r\n  "humidity": 75,\r\n  "wind_speed": 3.5,\r\n  "weather": "Clear",\r\n  "timestamp": "2025-12-04T22:00:00Z"\r\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-license",children:"\ud83d\udcc4 License"}),"\n",(0,r.jsxs)(n.p,{children:["D\u1ef1 \xe1n n\xe0y \u0111\u01b0\u1ee3c ph\xe2n ph\u1ed1i d\u01b0\u1edbi ",(0,r.jsx)(n.a,{href:"https://github.com/HoDuongQuocHuy278/GreenEduMap-DTUDZ/blob/main/LICENSE",children:"GNU General Public License v3.0"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);